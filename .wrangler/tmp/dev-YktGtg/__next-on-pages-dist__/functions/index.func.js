import{__chunk_9728 as ys,__chunk_5023 as vs,__chunk_5828 as ws,__chunk_3204 as bs,__chunk_5294 as ks,__chunk_8239 as Ss,__chunk_60 as xs,__chunk_7376 as Ts,__chunk_2542 as Es,__chunk_1622 as js,__chunk_4351 as Os,__chunk_5789 as Ps,__chunk_2024 as Rs,__chunk_2860 as $s,__chunk_5383 as Cs,__chunk_573 as As,__chunk_1419 as Is,__chunk_4369 as Ls,__chunk_6932 as Ns,__chunk_4899 as Us,__chunk_1795 as Ds,__chunk_774 as Fs,__chunk_6457 as Ms,__chunk_6384 as Bs,__chunk_683 as qs,__chunk_3561 as zs,__chunk_8891 as Vs,__chunk_8039 as Js,__chunk_8263 as Ks,__chunk_5277 as Gs,__chunk_3903 as Hs,__chunk_9968 as Ws,__chunk_5902 as Xs,__chunk_6597 as Ys,__chunk_1638 as Qs,__chunk_6336 as Zs,__chunk_4831 as er,__chunk_3916 as tr,__chunk_8022 as sr,__chunk_374 as rr,__chunk_6210 as ir,__chunk_7257 as nr,__chunk_1084 as ar,__chunk_1797 as or,__chunk_1054 as lr,__chunk_7049 as cr,__chunk_5771 as hr,__chunk_3947 as ur,__chunk_6395 as dr,__chunk_6872 as fr,__chunk_3469 as pr,__chunk_5634 as _r,__chunk_9041 as mr,__chunk_8578 as gr,__chunk_8872 as yr,__chunk_4006 as vr,__chunk_5048 as wr,__chunk_3979 as br,__chunk_9276 as kr,__chunk_7788 as Sr,__chunk_6193 as xr,__chunk_3002 as Tr,__chunk_5167 as Er,__chunk_5179 as jr,__chunk_5572 as Or,__chunk_2831 as Pr,__chunk_8684 as Rr,__chunk_6622 as $r,__chunk_5034 as Cr,__chunk_2886 as Ar,__chunk_4029 as Ir,__chunk_3335 as Lr,__chunk_228 as Nr,__chunk_3835 as Ur,__chunk_3449 as Dr,__chunk_9713 as Fr,__chunk_8289 as Mr,__chunk_3711 as Br,__chunk_7382 as qr,__chunk_9227 as zr,__chunk_5289 as Vr,__chunk_7894 as Jr,__chunk_9423 as Kr,__chunk_7918 as Gr,__chunk_7397 as Hr,__chunk_7867 as Wr,__chunk_726 as Xr,__chunk_3298 as Yr,__chunk_2527 as Qr,__chunk_5098 as Zr,__chunk_9017 as ei,__chunk_2209 as ti,__chunk_8113 as si,__chunk_2051 as ri,__chunk_1900 as ii,__chunk_5661 as ni,__chunk_2917 as ai,__chunk_1096 as oi,__chunk_9008 as li,__chunk_1196 as ci,__chunk_9445 as hi,__chunk_3099 as ui,__chunk_516 as di,__chunk_3862 as fi,__chunk_6485 as pi,__chunk_5579 as _i,__chunk_3497 as mi,__chunk_2428 as gi,__chunk_4225 as yi,__chunk_5459 as vi,__chunk_1517 as wi,__chunk_1889 as bi,__chunk_7891 as ki,__chunk_4740 as Si,__chunk_9858 as xi,__chunk_6297 as Ti,__chunk_1426 as Ei,__chunk_4718 as ji,__chunk_4263 as Oi,__chunk_4896 as Pi,__chunk_4187 as Ri,__chunk_5303 as $i,__chunk_5526 as Ci,__chunk_5920 as Ai,__chunk_8821 as Ii,__chunk_1198 as Li}from"../../__next-on-pages-dist__/webpack/700033f4d68e57e8c7000aa1d73d0114.js";import{__chunk_3405 as Ni,__chunk_3102 as Ui,__chunk_151 as Di,__chunk_850 as Fi,__chunk_200 as Mi,__chunk_490 as Bi,__chunk_9845 as qi,__chunk_2251 as zi,__chunk_1707 as Vi,__chunk_8145 as Ji,__chunk_1681 as Ki,__chunk_2568 as Gi,__chunk_844 as Hi,__chunk_6379 as Wi,__chunk_577 as Xi,__chunk_1115 as Yi,__chunk_2898 as Qi,__chunk_5616 as Zi,__chunk_8855 as en,__chunk_901 as tn,__chunk_6869 as sn,__chunk_2075 as rn,__chunk_6195 as nn,__chunk_2067 as an}from"../../__next-on-pages-dist__/webpack/2e881b543e26d972b5224ca045dcb973.js";import{__NEXT_FONT_MANIFEST as on,__REACT_LOADABLE_MANIFEST as ln,__BUILD_MANIFEST as cn}from"../../__next-on-pages-dist__/manifest/27d10e462fba646daaa29468a0656e12.js";import{__RSC_SERVER_MANIFEST as hn}from"../../__next-on-pages-dist__/manifest/__RSC_SERVER_MANIFEST.js";globalThis._ENTRIES={};self.__RSC_SERVER_MANIFEST=hn;globalThis.__RSC_MANIFEST=globalThis.__RSC_MANIFEST||{};globalThis.__RSC_MANIFEST["/page"]={moduleLoading:{prefix:"/_next/",crossOrigin:null},ssrModuleMapping:{1778:{"*":{id:"9295",name:"*",chunks:[],async:!1}},1902:{"*":{id:"3225",name:"*",chunks:[],async:!1}},5250:{"*":{id:"1476",name:"*",chunks:[],async:!1}},5613:{"*":{id:"8771",name:"*",chunks:[],async:!1}},7690:{"*":{id:"2583",name:"*",chunks:[],async:!1}},7831:{"*":{id:"3982",name:"*",chunks:[],async:!1}},8955:{"*":{id:"6840",name:"*",chunks:[],async:!1}}},edgeSSRModuleMapping:{1166:{"*":{id:"6597",name:"*",chunks:[],async:!1}},1778:{"*":{id:"7918",name:"*",chunks:[],async:!1}},1902:{"*":{id:"2527",name:"*",chunks:[],async:!1}},2472:{"*":{id:"573",name:"*",chunks:[],async:!1}},4758:{"*":{id:"3916",name:"*",chunks:[],async:!1}},5250:{"*":{id:"3449",name:"*",chunks:[],async:!1}},5498:{"*":{id:"6001",name:"*",chunks:[],async:!1}},5613:{"*":{id:"2209",name:"*",chunks:[],async:!1}},7690:{"*":{id:"2917",name:"*",chunks:[],async:!1}},7831:{"*":{id:"8289",name:"*",chunks:[],async:!1}},8599:{"*":{id:"1084",name:"*",chunks:[],async:!1}},8955:{"*":{id:"1900",name:"*",chunks:[],async:!1}}},clientModules:{"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/shared/lib/app-router-context.shared-runtime.js":{id:8599,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/shared/lib/app-router-context.shared-runtime.js":{id:8599,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/shared/lib/hooks-client-context.shared-runtime.js":{id:4758,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/shared/lib/hooks-client-context.shared-runtime.js":{id:4758,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/shared/lib/server-inserted-html.shared-runtime.js":{id:2472,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/shared/lib/server-inserted-html.shared-runtime.js":{id:2472,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/client/components/app-router.js":{id:7690,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/client/components/app-router.js":{id:7690,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/client/components/error-boundary.js":{id:8955,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/client/components/error-boundary.js":{id:8955,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/client/components/layout-router.js":{id:5613,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/client/components/layout-router.js":{id:5613,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/client/components/not-found-boundary.js":{id:1902,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/client/components/not-found-boundary.js":{id:1902,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/client/components/render-from-template-context.js":{id:1778,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/client/components/render-from-template-context.js":{id:1778,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js":{id:7831,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/client/components/static-generation-searchparams-bailout-provider.js":{id:7831,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/shared/lib/loadable-context.shared-runtime.js":{id:1166,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/shared/lib/loadable-context.shared-runtime.js":{id:1166,name:"*",chunks:[],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/client/link.js":{id:5250,name:"*",chunks:["250","static/chunks/250-09f7fcd14d8ec3f3.js","185","static/chunks/app/layout-899eb011ac576594.js"],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/dist/esm/client/link.js":{id:5250,name:"*",chunks:["250","static/chunks/250-09f7fcd14d8ec3f3.js","185","static/chunks/app/layout-899eb011ac576594.js"],async:!1},'/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/node_modules/next/font/google/target.css?{"path":"src/app/layout.tsx","import":"Inter","arguments":[{"subsets":["latin"]}],"variableName":"inter"}':{id:9646,name:"*",chunks:["250","static/chunks/250-09f7fcd14d8ec3f3.js","185","static/chunks/app/layout-899eb011ac576594.js"],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/globals.css":{id:3385,name:"*",chunks:["250","static/chunks/250-09f7fcd14d8ec3f3.js","185","static/chunks/app/layout-899eb011ac576594.js"],async:!1},"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/ui/Table.tsx":{id:5498,name:"*",chunks:["250","static/chunks/250-09f7fcd14d8ec3f3.js","769","static/chunks/769-75178c1708539c57.js","931","static/chunks/app/page-9f9fd1515ccb256a.js"],async:!1}},entryCSSFiles:{"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/loading":[],"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/not-found":[],"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/layout":["static/css/a6de7647ce6660f8.css"],"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/page":[]}};self.__BUILD_MANIFEST=cn;self.__REACT_LOADABLE_MANIFEST=ln;self.__NEXT_FONT_MANIFEST=on;self.__PRERENDER_MANIFEST='{"version":4,"routes":{"/tasks/create":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/tasks/layout,_N_T_/tasks/create/layout,_N_T_/tasks/create/page,_N_T_/tasks/create"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data"}],"initialRevalidateSeconds":false,"srcRoute":"/tasks/create","dataRoute":"/tasks/create.rsc"}},"dynamicRoutes":{},"notFoundRoutes":[],"preview":{"previewModeId":"068fdee52b004f4ecd1e2901f3d5f42c","previewModeSigningKey":"7aea21dfa33348976d6b3d4edaf6c764f75f9d13897d34f49760c18b20ee2190","previewModeEncryptionKey":"1760b986a0f5fdf374dd480c11b66e09cf7fba9fe766874a48943ae11f5d5ec4"}}';(()=>{"use strict";var M={},N={};function f(p){var T=N[p];if(T!==void 0)return T.exports;var g=N[p]={exports:{}},k=!0;try{M[p](g,g.exports,f),k=!1}finally{k&&delete N[p]}return g.exports}f.m=M,(()=>{var p=[];f.O=(T,g,k,A)=>{if(g){A=A||0;for(var E=p.length;E>0&&p[E-1][2]>A;E--)p[E]=p[E-1];p[E]=[g,k,A];return}for(var x=1/0,E=0;E<p.length;E++){for(var[g,k,A]=p[E],b=!0,I=0;I<g.length;I++)(A&!1||x>=A)&&Object.keys(f.O).every(q=>f.O[q](g[I]))?g.splice(I--,1):(b=!1,A<x&&(x=A));if(b){p.splice(E--,1);var y=k();y!==void 0&&(T=y)}}return T}})(),f.n=p=>{var T=p&&p.__esModule?()=>p.default:()=>p;return f.d(T,{a:T}),T},(()=>{var p=Object.getPrototypeOf?g=>Object.getPrototypeOf(g):g=>g.__proto__,T;f.t=function(g,k){if(k&1&&(g=this(g)),k&8||typeof g=="object"&&g&&(k&4&&g.__esModule||k&16&&typeof g.then=="function"))return g;var A=Object.create(null);f.r(A);var E={};T=T||[null,p({}),p([]),p(p)];for(var x=k&2&&g;typeof x=="object"&&!~T.indexOf(x);x=p(x))Object.getOwnPropertyNames(x).forEach(b=>E[b]=()=>g[b]);return E.default=()=>g,f.d(A,E),A}})(),f.d=(p,T)=>{for(var g in T)f.o(T,g)&&!f.o(p,g)&&Object.defineProperty(p,g,{enumerable:!0,get:T[g]})},f.e=()=>Promise.resolve(),f.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),f.o=(p,T)=>Object.prototype.hasOwnProperty.call(p,T),f.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},(()=>{var p={993:0};f.O.j=k=>p[k]===0;var T=(k,A)=>{var[E,x,b]=A,I,y,v=0;if(E.some(j=>p[j]!==0)){for(I in x)f.o(x,I)&&(f.m[I]=x[I]);if(b)var w=b(f)}for(k&&k(A);v<E.length;v++)y=E[v],f.o(p,y)&&p[y]&&p[y][0](),p[y]=0;return f.O(w)},g=self.webpackChunk_N_E=self.webpackChunk_N_E||[];g.forEach(T.bind(null,0)),g.push=T.bind(null,g.push.bind(g))})()})();(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2067:an,6195:nn,1198:Li,3032:(M,N,f)=>{"use strict";f.r(N),f.d(N,{ComponentMod:()=>Y,default:()=>Ee});var p,T={};f.r(T),f.d(T,{AppRouter:()=>y.WY,GlobalError:()=>I.ZP,LayoutRouter:()=>y.yO,NotFoundBoundary:()=>y.O4,RenderFromTemplateContext:()=>y.b5,StaticGenerationSearchParamsBailoutProvider:()=>y.ac,__next_app__:()=>R,actionAsyncStorage:()=>y.Wz,createSearchParamsBailoutProxy:()=>y.th,decodeAction:()=>y.Hs,decodeFormState:()=>y.dH,decodeReply:()=>y.kf,originalPathname:()=>j,pages:()=>w,patchFetch:()=>y.XH,preconnect:()=>y.$P,preloadFont:()=>y.C5,preloadStyle:()=>y.oH,renderToReadableStream:()=>y.aW,requestAsyncStorage:()=>y.Fg,routeModule:()=>q,serverHooks:()=>y.GP,staticGenerationAsyncStorage:()=>y.AT,staticGenerationBailout:()=>y.o8,taintObjectReference:()=>y.nr,tree:()=>v}),f(5634);var g=f(8578),k=f(9445),A=f(5167),E=f(5034),x=f(8239),b=f(2251),I=f(7376),y=f(60);let v=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(f.bind(f,7115)),"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(f.bind(f,5294)),"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(f.bind(f,3204)),"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(f.bind(f,5828)),"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/not-found.tsx"]}],w=["/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/page.tsx"],j="/page",R={require:f,loadChunk:()=>Promise.resolve()},q=new x.AppPageRouteModule({definition:{kind:b.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:v}});var U=f(4029);let V=ae=>ae?JSON.parse(ae):void 0,W=self.__BUILD_MANIFEST,J=V(self.__PRERENDER_MANIFEST),K=V(self.__REACT_LOADABLE_MANIFEST),X=(p=self.__RSC_MANIFEST)==null?void 0:p["/page"],Se=V(self.__RSC_SERVER_MANIFEST),xe=V(self.__NEXT_FONT_MANIFEST),Te=(0,k.d)({pagesType:U.s.APP,dev:!1,page:"/page",appMod:null,pageMod:T,errorMod:null,error500Mod:null,Document:null,buildManifest:W,prerenderManifest:J,renderToHTML:E.f,reactLoadableManifest:K,clientReferenceManifest:X,serverActionsManifest:Se,serverActions:void 0,subresourceIntegrityManifest:void 0,config:{env:{},webpack:null,eslint:{ignoreDuringBuilds:!1},typescript:{ignoreBuildErrors:!1,tsconfigPath:"tsconfig.json"},distDir:".next",cleanDistDir:!0,assetPrefix:"",cacheMaxMemorySize:52428800,configOrigin:"next.config.mjs",useFileSystemPublicRoutes:!0,generateEtags:!0,pageExtensions:["tsx","ts","jsx","js"],poweredByHeader:!0,compress:!0,analyticsId:"",images:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1},devIndicators:{buildActivity:!0,buildActivityPosition:"bottom-right"},onDemandEntries:{maxInactiveAge:6e4,pagesBufferLength:5},amp:{canonicalBase:""},basePath:"",sassOptions:{},trailingSlash:!1,i18n:null,productionBrowserSourceMaps:!1,optimizeFonts:!0,excludeDefaultMomentLocales:!0,serverRuntimeConfig:{},publicRuntimeConfig:{},reactProductionProfiling:!1,reactStrictMode:null,httpAgentOptions:{keepAlive:!0},outputFileTracing:!0,staticPageGenerationTimeout:60,swcMinify:!0,modularizeImports:{"@mui/icons-material":{transform:"@mui/icons-material/{{member}}"},lodash:{transform:"lodash/{{member}}"},"next/server":{transform:"next/dist/server/web/exports/{{ kebabCase member }}"}},experimental:{serverMinification:!0,serverSourceMaps:!1,caseSensitiveRoutes:!1,useDeploymentId:!1,useDeploymentIdServerActions:!1,clientRouterFilter:!0,clientRouterFilterRedirects:!1,fetchCacheKeyPrefix:"",middlewarePrefetch:"flexible",optimisticClientCache:!0,manualClientBasePath:!1,cpus:7,memoryBasedWorkersCount:!1,isrFlushToDisk:!0,workerThreads:!1,optimizeCss:!1,nextScriptWorkers:!1,scrollRestoration:!1,externalDir:!1,disableOptimizedLoading:!1,gzipSize:!0,craCompat:!1,esmExternals:!0,fullySpecified:!1,outputFileTracingRoot:"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo",swcTraceProfiling:!1,forceSwcTransforms:!1,largePageDataBytes:128e3,adjustFontFallbacks:!1,adjustFontFallbacksWithSizeAdjust:!1,typedRoutes:!1,instrumentationHook:!1,bundlePagesExternals:!1,parallelServerCompiles:!1,parallelServerBuildTraces:!1,ppr:!1,missingSuspenseWithCSRBailout:!0,optimizePackageImports:["lucide-react","date-fns","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"]},configFile:"/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/next.config.mjs",configFileName:"next.config.mjs"},buildId:"sGmekv4xC-A7_Wbqtx_Yy",nextFontManifest:xe,incrementalCacheHandler:null}),Y=T;function Ee(ae){return(0,g.V)({...ae,IncrementalCache:A.k,handler:Te})}},8821:Ii,5920:Ai,5526:Ci,773:(M,N,f)=>{Promise.resolve().then(f.bind(f,6001))},5303:()=>{},5238:(M,N,f)=>{"use strict";f.r(N),f.d(N,{Headers:()=>k,Request:()=>A,Response:()=>E,default:()=>g,fetch:()=>T});var p=function(){if(typeof self<"u")return self;if(f.g!==void 0)return f.g;throw Error("unable to locate global object")}();let T=p.fetch,g=p.fetch.bind(p),k=p.Headers,A=p.Request,E=p.Response},3206:(M,N)=>{"use strict";N.Q=function(k,A){if(typeof k!="string")throw TypeError("argument str must be a string");for(var E={},x=(A||{}).decode||T,b=0;b<k.length;){var I=k.indexOf("=",b);if(I===-1)break;var y=k.indexOf(";",b);if(y===-1)y=k.length;else if(y<I){b=k.lastIndexOf(";",I-1)+1;continue}var v=k.slice(b,I).trim();if(E[v]===void 0){var w=k.slice(I+1,y).trim();w.charCodeAt(0)===34&&(w=w.slice(1,-1)),E[v]=function(j,R){try{return R(j)}catch{return j}}(w,x)}b=y+1}return E},N.q=function(k,A,E){var x=E||{},b=x.encode||g;if(typeof b!="function")throw TypeError("option encode is invalid");if(!p.test(k))throw TypeError("argument name is invalid");var I=b(A);if(I&&!p.test(I))throw TypeError("argument val is invalid");var y=k+"="+I;if(x.maxAge!=null){var v=x.maxAge-0;if(isNaN(v)||!isFinite(v))throw TypeError("option maxAge is invalid");y+="; Max-Age="+Math.floor(v)}if(x.domain){if(!p.test(x.domain))throw TypeError("option domain is invalid");y+="; Domain="+x.domain}if(x.path){if(!p.test(x.path))throw TypeError("option path is invalid");y+="; Path="+x.path}if(x.expires){var w=x.expires;if(f.call(w)!=="[object Date]"&&!(w instanceof Date)||isNaN(w.valueOf()))throw TypeError("option expires is invalid");y+="; Expires="+w.toUTCString()}if(x.httpOnly&&(y+="; HttpOnly"),x.secure&&(y+="; Secure"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():x.priority){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return y};var f=Object.prototype.toString,p=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function T(k){return k.indexOf("%")!==-1?decodeURIComponent(k):k}function g(k){return encodeURIComponent(k)}},4187:Ri,4896:Pi,4263:Oi,4718:ji,1426:Ei,6297:Ti,9858:xi,4740:Si,7891:ki,1889:bi,1517:wi,5459:vi,4225:yi,2428:gi,3497:mi,5579:_i,6485:pi,3862:fi,516:di,3099:ui,9445:hi,1196:ci,9008:li,1096:oi,2917:ai,5661:ni,1900:ii,2051:ri,8113:si,2209:ti,9017:ei,5098:Zr,2527:Qr,3298:Yr,726:Xr,7867:Wr,7397:Hr,7918:Gr,9423:Kr,7894:Jr,5289:Vr,9227:zr,7382:qr,3711:Br,8289:Mr,9713:Fr,3449:Dr,3835:Ur,228:Nr,3335:Lr,4029:Ir,2886:Ar,5034:Cr,6622:$r,8684:Rr,2831:Pr,5572:Or,5179:jr,5167:Er,3002:Tr,6193:xr,7788:Sr,9276:kr,3979:br,5048:wr,4006:vr,8872:yr,8578:gr,9041:mr,5634:_r,3469:pr,6872:fr,6395:dr,3947:ur,5771:hr,7049:cr,1054:lr,1797:or,1084:ar,7257:nr,6210:ir,374:rr,8022:sr,3916:tr,4831:er,6336:Zs,1638:Qs,6597:Ys,5902:Xs,9968:Ws,3903:Hs,5277:Gs,8263:Ks,8039:Js,8891:Vs,3561:zs,683:qs,6384:Bs,6457:Ms,774:Fs,1795:Ds,4899:Us,6932:Ns,4369:Ls,1419:Is,573:As,5383:Cs,2860:$s,2024:Rs,5789:Ps,9383:M=>{"use strict";M.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},6001:(M,N,f)=>{"use strict";f.r(N),f.d(N,{default:()=>fs});var p,T,g,k,A,E,x,b,I,y,v,w=f(6485),j=f(5579),R=f(3449);let q=i=>{let e;return e=i||(typeof fetch>"u"?(...t)=>Promise.resolve().then(f.bind(f,5238)).then(({default:s})=>s(...t)):fetch),(...t)=>e(...t)};class U extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class V extends U{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class W extends U{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class J extends U{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(p||(p={}));class K{constructor(e,{headers:t={},customFetch:s,region:r=p.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=q(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s,r,n,a,o;return r=this,n=void 0,a=void 0,o=function*(){try{let l,{headers:c,method:h,body:u}=t,d={},{region:m}=t;m||(m=this.region),m&&m!=="any"&&(d["x-region"]=m),u&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",l=u):typeof u=="string"?(d["Content-Type"]="text/plain",l=u):typeof FormData<"u"&&u instanceof FormData?l=u:(d["Content-Type"]="application/json",l=JSON.stringify(u)));let _=yield this.fetch(`${this.url}/${e}`,{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),c),body:l}).catch(P=>{throw new V(P)}),S=_.headers.get("x-relay-error");if(S&&S==="true")throw new W(_);if(!_.ok)throw new J(_);let O=((s=_.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim();return{data:O==="application/json"?yield _.json():O==="application/octet-stream"?yield _.blob():O==="multipart/form-data"?yield _.formData():yield _.text(),error:null}}catch(l){return{data:null,error:l}}},new(a||(a=Promise))(function(l,c){function h(m){try{d(o.next(m))}catch(_){c(_)}}function u(m){try{d(o.throw(m))}catch(_){c(_)}}function d(m){var _;m.done?l(m.value):((_=m.value)instanceof a?_:new a(function(S){S(_)})).then(h,u)}d((o=o.apply(r,n||[])).next())})}}var X=f(5238);class Se extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class xe{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=X.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var n,a,o;let l=null,c=null,h=null,u=r.status,d=r.statusText;if(r.ok){if(this.method!=="HEAD"){let S=await r.text();S===""||(c=this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S:JSON.parse(S))}let m=(n=this.headers.Prefer)===null||n===void 0?void 0:n.match(/count=(exact|planned|estimated)/),_=(a=r.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&_&&_.length>1&&(h=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,u=406,d="Not Acceptable"):c=c.length===1?c[0]:null)}else{let m=await r.text();try{l=JSON.parse(m),Array.isArray(l)&&r.status===404&&(c=[],l=null,u=200,d="OK")}catch{r.status===404&&m===""?(u=204,d="No Content"):l={message:m}}if(l&&this.isMaybeSingle&&((o=l?.details)===null||o===void 0?void 0:o.includes("0 rows"))&&(l=null,u=200,d="OK"),l&&this.shouldThrowOnError)throw new Se(l)}return{error:l,data:c,count:h,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(r=>{var n,a,o;return{error:{message:`${(n=r?.name)!==null&&n!==void 0?n:"FetchError"}: ${r?.message}`,details:`${(a=r?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(o=r?.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}}class Te extends xe{select(e){let t=!1,s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}={}){let a=n?`${n}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){let r=s===void 0?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){let n=r===void 0?"offset":`${r}.offset`,a=r===void 0?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:a="text"}={}){var o;let l=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`,this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Y extends Te{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let s=t.map(r=>typeof r=="string"&&RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let n="";r==="plain"?n="pl":r==="phrase"?n="ph":r==="websearch"&&(n="w");let a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){let r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class Ee{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){let r=!1,n=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),s&&(this.headers.Prefer=`count=${s}`),new Y({method:t?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){let r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),s||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){let n=e.reduce((a,o)=>a.concat(Object.keys(o)),[]);if(n.length>0){let a=[...new Set(n)].map(o=>`"${o}"`);this.url.searchParams.set("columns",a.join(","))}}return new Y({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){let a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){let l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Y({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Y({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new Y({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}let ae={"X-Client-Info":"postgrest-js/1.9.2"};class je{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},ae),t),this.schemaName=s,this.fetch=r}from(e){return new Ee(new URL(`${this.url}/${e}`),{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new je(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,count:r}={}){let n,a,o=new URL(`${this.url}/rpc/${e}`);s?(n="HEAD",Object.entries(t).forEach(([c,h])=>{o.searchParams.append(c,`${h}`)})):(n="POST",a=t);let l=Object.assign({},this.headers);return r&&(l.Prefer=`count=${r}`),new Y({method:n,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}let lt={"X-Client-Info":"realtime-js/2.9.3"};(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(T||(T={})),function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"}(g||(g={})),function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"}(k||(k={})),(A||(A={})).websocket="websocket",function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"}(E||(E={}));class Me{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ct{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){let r=t.getUint8(1),n=t.getUint8(2),a=this.HEADER_LENGTH+2,o=s.decode(e.slice(a,a+r));a+=r;let l=s.decode(e.slice(a,a+n));return a+=n,{ref:null,topic:o,event:l,payload:JSON.parse(s.decode(e.slice(a,e.byteLength)))}}}class Oe{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(x||(x={}));class pe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{let{onJoin:n,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pe.syncState(this.state,r,n,a),this.pendingDiffs.forEach(l=>{this.state=pe.syncDiff(this.state,l,n,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},r=>{let{onJoin:n,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=pe.syncDiff(this.state,r,n,a),o())}),this.onJoin((r,n,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:n,newPresences:a})}),this.onLeave((r,n,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:n,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){let n=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(n,(c,h)=>{a[c]||(l[c]=h)}),this.map(a,(c,h)=>{let u=n[c];if(u){let d=h.map(O=>O.presence_ref),m=u.map(O=>O.presence_ref),_=h.filter(O=>0>m.indexOf(O.presence_ref)),S=u.filter(O=>0>d.indexOf(O.presence_ref));_.length>0&&(o[c]=_),S.length>0&&(l[c]=S)}else o[c]=h}),this.syncDiff(n,{joins:o,leaves:l},s,r)}static syncDiff(e,t,s,r){let{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(n,(o,l)=>{var c;let h=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),h.length>0){let u=e[o].map(m=>m.presence_ref),d=h.filter(m=>0>u.indexOf(m.presence_ref));e[o].unshift(...d)}s(o,h,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;let h=l.map(u=>u.presence_ref);c=c.filter(u=>0>h.indexOf(u.presence_ref)),e[o]=c,r(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,s)=>{let r=e[s];return"metas"in r?t[s]=r.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(b||(b={}));let Be=(i,e,t={})=>{var s;let r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((n,a)=>(n[a]=ht(a,i,e,r),n),{})},ht=(i,e,t,s)=>{let r=e.find(o=>o.name===i),n=r?.type,a=t[i];return n&&!s.includes(n)?qe(n,a):ze(a)},qe=(i,e)=>{if(i.charAt(0)==="_")return pt(e,i.slice(1,i.length));switch(i){case b.bool:return ut(e);case b.float4:case b.float8:case b.int2:case b.int4:case b.int8:case b.numeric:case b.oid:return dt(e);case b.json:case b.jsonb:return ft(e);case b.timestamp:return _t(e);case b.abstime:case b.date:case b.daterange:case b.int4range:case b.int8range:case b.money:case b.reltime:case b.text:case b.time:case b.timestamptz:case b.timetz:case b.tsrange:case b.tstzrange:default:return ze(e)}},ze=i=>i,ut=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},dt=i=>{if(typeof i=="string"){let e=parseFloat(i);if(!Number.isNaN(e))return e}return i},ft=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){console.log(`JSON parse error: ${e}`)}return i},pt=(i,e)=>{if(typeof i!="string")return i;let t=i.length-1,s=i[t];if(i[0]==="{"&&s==="}"){let r,n=i.slice(1,t);try{r=JSON.parse("["+n+"]")}catch{r=n?n.split(","):[]}return r.map(a=>qe(e,a))}return i},_t=i=>typeof i=="string"?i.replace(" ","T"):i;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(I||(I={})),function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes"}(y||(y={})),function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"}(v||(v={}));class Pe{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=g.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Oe(this,k.join,this.params,this.timeout),this.rejoinTimer=new Me(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=g.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=g.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=g.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=g.errored,this.rejoinTimer.scheduleTimeout())}),this._on(k.reply,{},(r,n)=>{this._trigger(this._replyEventName(n),r)}),this.presence=new pe(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:n,presence:a}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));let o={},l={broadcast:n,presence:a,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(c=>c.filter))!==null&&r!==void 0?r:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}{let u=this.bindings.postgres_changes,d=(h=u?.length)!==null&&h!==void 0?h:0,m=[];for(let _=0;_<d;_++){let S=u[_],{filter:{event:O,schema:P,table:D,filter:z}}=S,F=c&&c[_];if(F&&F.event===O&&F.schema===P&&F.table===D&&F.filter===z)m.push(Object.assign(Object.assign({},S),{id:F.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||e.type!=="broadcast")return new Promise(n=>{var a,o,l;let c=this._push(e.type,e,t.timeout||this.timeout);e.type!=="broadcast"||((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0?void 0:l.ack)||n("ok"),c.receive("ok",()=>n("ok")),c.receive("timeout",()=>n("timed out"))});{let{event:n,payload:a}=e,o={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=t.timeout)!==null&&r!==void 0?r:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=g.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(k.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{let r=new Oe(this,k.leave,{},e);r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return(e=(e=e.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){let r=new AbortController,n=setTimeout(()=>r.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(n),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Oe(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,n;let a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:h}=k;if(s&&[o,l,c,h].indexOf(a)>=0&&s!==this._joinRef())return;let u=this._onMessage(a,t,s);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(d=>{var m,_,S;return((m=d.filter)===null||m===void 0?void 0:m.event)==="*"||((S=(_=d.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===a}).map(d=>d.callback(u,s)):(n=this.bindings[a])===null||n===void 0||n.filter(d=>{var m,_,S,O,P,D;if(!["broadcast","presence","postgres_changes"].includes(a))return d.type.toLocaleLowerCase()===a;if("id"in d){let z=d.id,F=(m=d.filter)===null||m===void 0?void 0:m.event;return z&&((_=t.ids)===null||_===void 0?void 0:_.includes(z))&&(F==="*"||F?.toLocaleLowerCase()===((S=t.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}{let z=(P=(O=d?.filter)===null||O===void 0?void 0:O.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return z==="*"||z===((D=t?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}}).map(d=>{if(typeof u=="object"&&"ids"in u){let m=u.data,{schema:_,table:S,commit_timestamp:O,type:P,errors:D}=m;u=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:O,eventType:P,new:{},old:{},errors:D}),this._getPayloadRecords(m))}d.callback(u,s)})}_isClosed(){return this.state===g.closed}_isJoined(){return this.state===g.joined}_isJoining(){return this.state===g.joining}_isLeaving(){return this.state===g.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){let r=e.toLocaleLowerCase(),n={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(n):this.bindings[r]=[n],this}_off(e,t){let s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var n;return!(((n=r.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===s&&Pe.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(k.close,{},e)}_onError(e){this._on(k.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=g.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Be(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Be(e.columns,e.old_record)),t}}let mt=()=>{},gt=typeof WebSocket<"u";class yt{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=lt,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=mt,this.conn=null,this.sendBuffer=[],this.serializer=new ct,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=n=>{let a;return a=n||(typeof fetch>"u"?(...o)=>Promise.resolve().then(f.bind(f,5238)).then(({default:l})=>l(...o)):fetch),(...o)=>a(...o)},this.endPoint=`${e}/${A.websocket}`,t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let r=(s=t?.params)===null||s===void 0?void 0:s.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=t?.encode?t.encode:(n,a)=>a(JSON.stringify(n)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Me(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(gt){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new vt(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Promise.resolve().then(f.t.bind(f,9383,23)).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case T.connecting:return E.Connecting;case T.open:return E.Open;case T.closing:return E.Closing;default:return E.Closed}}isConnected(){return this.connectionState()===E.Open}channel(e,t={config:{}}){let s=new Pe(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){let{topic:t,event:s,payload:r,ref:n}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${s} (${n})`,r),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(k.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:r,payload:n,ref:a}=t;(a&&a===this.pendingHeartbeatRef||r===n?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${s} ${r} ${a&&"("+a+")"||""}`,n),this.channels.filter(o=>o._isMember(s)).forEach(o=>o._trigger(r,n,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(k.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class vt{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=T.connecting,this.send=$i,this.url=null,this.url=e,this.close=s.close}}class Re extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function B(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class wt extends Re{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ve extends Re{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}let Je=i=>{let e;return e=i||(typeof fetch>"u"?(...t)=>Promise.resolve().then(f.bind(f,5238)).then(({default:s})=>s(...t)):fetch),(...t)=>e(...t)},bt=()=>function(i,e,t,s){return new(t||(t=Promise))(function(r,n){function a(c){try{l(s.next(c))}catch(h){n(h)}}function o(c){try{l(s.throw(c))}catch(h){n(h)}}function l(c){var h;c.done?r(c.value):((h=c.value)instanceof t?h:new t(function(u){u(h)})).then(a,o)}l((s=s.apply(i,e||[])).next())})}(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(f.bind(f,5238))).Response:Response});var oe=function(i,e,t,s){return new(t||(t=Promise))(function(r,n){function a(c){try{l(s.next(c))}catch(h){n(h)}}function o(c){try{l(s.throw(c))}catch(h){n(h)}}function l(c){var h;c.done?r(c.value):((h=c.value)instanceof t?h:new t(function(u){u(h)})).then(a,o)}l((s=s.apply(i,e||[])).next())})};let $e=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),kt=(i,e)=>oe(void 0,void 0,void 0,function*(){i instanceof(yield bt())?i.json().then(t=>{e(new wt($e(t),i.status||500))}).catch(t=>{e(new Ve($e(t),t))}):e(new Ve($e(i),i))}),St=(i,e,t,s)=>{let r={method:i,headers:e?.headers||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};function ge(i,e,t,s,r,n){return oe(this,void 0,void 0,function*(){return new Promise((a,o)=>{i(t,St(e,s,r,n)).then(l=>{if(!l.ok)throw l;return s?.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>kt(l,o))})})}function Ce(i,e,t,s){return oe(this,void 0,void 0,function*(){return ge(i,"GET",e,t,s)})}function Q(i,e,t,s,r){return oe(this,void 0,void 0,function*(){return ge(i,"POST",e,s,r,t)})}function Ke(i,e,t,s,r){return oe(this,void 0,void 0,function*(){return ge(i,"DELETE",e,s,r,t)})}var G=function(i,e,t,s){return new(t||(t=Promise))(function(r,n){function a(c){try{l(s.next(c))}catch(h){n(h)}}function o(c){try{l(s.throw(c))}catch(h){n(h)}}function l(c){var h;c.done?r(c.value):((h=c.value)instanceof t?h:new t(function(u){u(h)})).then(a,o)}l((s=s.apply(i,e||[])).next())})};let xt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tt{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Je(r)}uploadOrUpdate(e,t,s,r){return G(this,void 0,void 0,function*(){try{let n,a=Object.assign(Object.assign({},Ge),r),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&s instanceof Blob?((n=new FormData).append("cacheControl",a.cacheControl),n.append("",s)):typeof FormData<"u"&&s instanceof FormData?(n=s).append("cacheControl",a.cacheControl):(n=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);let l=this._removeEmptyFolders(t),c=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:n,headers:o},a?.duplex?{duplex:a.duplex}:{})),u=yield h.json();return h.ok?{data:{path:l,id:u.Id,fullPath:u.Key},error:null}:{data:null,error:u}}catch(n){if(B(n))return{data:null,error:n};throw n}})}upload(e,t,s){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return G(this,void 0,void 0,function*(){let n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l,c=Object.assign({upsert:Ge.upsert},r),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?((l=new FormData).append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s).append("cacheControl",c.cacheControl):(l=s,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);let u=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:h}),d=yield u.json();return u.ok?{data:{path:n,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(B(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return G(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e),s=yield Q(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),r=new URL(this.url+s.url),n=r.searchParams.get("token");if(!n)throw new Re("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:n},error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}update(e,t,s){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return G(this,void 0,void 0,function*(){try{return{data:yield Q(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}})}copy(e,t){return G(this,void 0,void 0,function*(){try{return{data:{path:(yield Q(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return G(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=yield Q(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return G(this,void 0,void 0,function*(){try{let r=yield Q(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${n}`):null})),error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}})}download(e,t){return G(this,void 0,void 0,function*(){let s=t?.transform!==void 0,r=this.transformOptsToQueryString(t?.transform||{}),n=r?`?${r}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield Ce(this.fetch,`${this.url}/${s?"render/image/authenticated":"object"}/${a}${n}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(B(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){let s=this._getFinalPath(e),r=[],n=t?.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&r.push(n);let a=t?.transform!==void 0,o=this.transformOptsToQueryString(t?.transform||{});o!==""&&r.push(o);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a?"render/image":"object"}/public/${s}${l}`)}}}remove(e){return G(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}list(e,t,s){return G(this,void 0,void 0,function*(){try{let r=Object.assign(Object.assign(Object.assign({},xt),t),{prefix:e||""});return{data:yield Q(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}let Et={"X-Client-Info":"storage-js/2.5.5"};var le=function(i,e,t,s){return new(t||(t=Promise))(function(r,n){function a(c){try{l(s.next(c))}catch(h){n(h)}}function o(c){try{l(s.throw(c))}catch(h){n(h)}}function l(c){var h;c.done?r(c.value):((h=c.value)instanceof t?h:new t(function(u){u(h)})).then(a,o)}l((s=s.apply(i,e||[])).next())})};class jt{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Et),t),this.fetch=Je(s)}listBuckets(){return le(this,void 0,void 0,function*(){try{return{data:yield Ce(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}})}getBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield Ce(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return le(this,void 0,void 0,function*(){try{return{data:yield Q(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return le(this,void 0,void 0,function*(){try{return{data:yield function(s,r,n,a,o){return oe(this,void 0,void 0,function*(){return ge(s,"PUT",r,a,void 0,n)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}})}emptyBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield Q(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}deleteBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}}class Ot extends jt{constructor(e,t={},s){super(e,t,s)}from(e){return new Tt(this.url,this.headers,e,this.fetch)}}let He="";He=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&navigator.product==="ReactNative"?"react-native":"node";let Pt={"X-Client-Info":`supabase-js-${He}/2.39.3`},Rt=i=>{let e;return e=i||(typeof fetch>"u"?X.default:fetch),(...t)=>e(...t)},$t=()=>typeof Headers>"u"?X.Headers:Headers,Ct=(i,e,t)=>{let s=Rt(t),r=$t();return(n,a)=>function(o,l,c,h){return new(c||(c=Promise))(function(u,d){function m(O){try{S(h.next(O))}catch(P){d(P)}}function _(O){try{S(h.throw(O))}catch(P){d(P)}}function S(O){var P;O.done?u(O.value):((P=O.value)instanceof c?P:new c(function(D){D(P)})).then(m,_)}S((h=h.apply(o,l||[])).next())})}(void 0,void 0,void 0,function*(){var o;let l=(o=yield e())!==null&&o!==void 0?o:i,c=new r(a?.headers);return c.has("apikey")||c.set("apikey",i),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(n,Object.assign(Object.assign({},a),{headers:c}))})},H=()=>typeof document<"u",ee={tested:!1,writable:!1},_e=()=>{if(!H())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ee.tested)return ee.writable;let i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),ee.tested=!0,ee.writable=!0}catch{ee.tested=!0,ee.writable=!1}return ee.writable};function Ae(i){let e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,r)=>{e[r]=s})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}let We=i=>{let e;return e=i||(typeof fetch>"u"?(...t)=>Promise.resolve().then(f.bind(f,5238)).then(({default:s})=>s(...t)):fetch),(...t)=>e(...t)},At=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",te=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},ye=async(i,e)=>{let t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ie=async(i,e)=>{await i.removeItem(e)};class ve{constructor(){this.promise=new ve.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Xe(i){let e=i.split(".");if(e.length!==3)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(e[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function(t){let s,r,n,a,o,l,c,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",d=0;for(t=t.replace("-","+").replace("_","/");d<t.length;)a=h.indexOf(t.charAt(d++)),o=h.indexOf(t.charAt(d++)),l=h.indexOf(t.charAt(d++)),c=h.indexOf(t.charAt(d++)),s=a<<2|o>>4,r=(15&o)<<4|l>>2,n=(3&l)<<6|c,u+=String.fromCharCode(s),l!=64&&r!=0&&(u+=String.fromCharCode(r)),c!=64&&n!=0&&(u+=String.fromCharCode(n));return u}(e[1]))}async function It(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function Lt(i){return("0"+i.toString(16)).substr(-2)}function ce(){let i=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(i),Array.from(i,Lt).join("")}async function Nt(i){let e=new TextEncoder().encode(i),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>String.fromCharCode(s)).join("")}async function he(i){return typeof crypto<"u"&&crypto.subtle!==void 0&&typeof TextEncoder<"u"?btoa(await Nt(i)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i)}ve.promiseConstructor=Promise;class Le extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function $(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Ut extends Le{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ye extends Le{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class se extends Le{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ue extends se{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Ne extends se{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class we extends se{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class be extends se{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qe extends se{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ue extends se{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function De(i){return $(i)&&i.name==="AuthRetryableFetchError"}class Dt extends se{constructor(e,t,s){super(e,"AuthWeakPasswordError",t),this.reasons=s}}var Ft=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&0>e.indexOf(s)&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(t[s[r]]=i[s[r]]);return t};let de=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Mt=[502,503,504];async function Ze(i){let e;if(!At(i))throw new Ue(de(i),0);if(Mt.includes(i.status))throw new Ue(de(i),i.status);try{e=await i.json()}catch(t){throw new Ye(de(t),t)}throw typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)?new Dt(de(e),i.status,e.weak_password.reasons):new Ut(de(e),i.status||500)}let Bt=(i,e,t,s)=>{let r={method:i,headers:e?.headers||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function C(i,e,t,s){var r;let n=Object.assign({},s?.headers);s?.jwt&&(n.Authorization=`Bearer ${s.jwt}`);let a=(r=s?.query)!==null&&r!==void 0?r:{};s?.redirectTo&&(a.redirect_to=s.redirectTo);let o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await qt(i,e,t+o,{headers:n,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(l):{data:Object.assign({},l),error:null}}async function qt(i,e,t,s,r,n){let a,o=Bt(e,s,r,n);try{a=await i(t,o)}catch(l){throw console.error(l),new Ue(de(l),0)}if(a.ok||await Ze(a),s?.noResolveJson)return a;try{return await a.json()}catch(l){await Ze(l)}}function re(i){var e,t;let s=null;return i.access_token&&i.refresh_token&&i.expires_in&&(s=Object.assign({},i),!i.expires_at)&&(s.expires_at=(t=i.expires_in,Math.round(Date.now()/1e3)+t)),{data:{session:s,user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function et(i){let e=re(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Z(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function zt(i){return{data:i,error:null}}function Vt(i){let{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:n}=i;return{data:{properties:{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:n},user:Object.assign({},Ft(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function Jt(i){return i}var Kt=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&0>e.indexOf(s)&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)0>e.indexOf(s[r])&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(t[s[r]]=i[s[r]]);return t};class Gt{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=We(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await C(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await C(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Z})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{let{options:t}=e,s=Kt(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s?.newEmail,delete r.newEmail),await C(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Vt,redirectTo:t?.redirectTo})}catch(t){if($(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await C(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Z})}catch(t){if($(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,n,a,o,l;try{let c={nextPage:null,lastPage:0,total:0},h=await C(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(n=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""},xform:Jt});if(h.error)throw h.error;let u=await h.json(),d=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(_=>{let S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(_.split(";")[1].split("=")[1]);c[`${O}Page`]=S}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if($(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await C(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Z})}catch(t){if($(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await C(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Z})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await C(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Z})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{let{data:t,error:s}=await C(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if($(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await C(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if($(t))return{data:null,error:t};throw t}}}let tt="0.0.0",Ht={"X-Client-Info":`gotrue-js/${tt}`},Wt={getItem:i=>_e()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{_e()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{_e()&&globalThis.localStorage.removeItem(i)}};function st(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}let fe={debug:!!(globalThis&&_e()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Xt extends rt{}async function Yt(i,e,t){fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);let s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),fe.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,r.name);try{return await t()}finally{fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,r.name)}}else{if(e===0)throw fe.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Xt(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(fe.debug)try{let n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}(function(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}})();let Qt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ht,flowType:"implicit",debug:!1};async function it(i,e,t){return await t()}class me{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=me.nextInstanceID,me.nextInstanceID+=1,this.instanceID>0&&H()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let r=Object.assign(Object.assign({},Qt),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Gt({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=We(r.fetch),this.lock=r.lock||it,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,r.lock?this.lock=r.lock:H()&&((t=globalThis?.navigator)===null||t===void 0?void 0:t.locks)?this.lock=Yt:this.lock=it,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:_e()?this.storage=Wt:(this.memoryStorage={},this.storage=st(this.memoryStorage)):(this.memoryStorage={},this.storage=st(this.memoryStorage)),H()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tt}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{let e=!!H()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),s?.message==="Identity is already linked"||s?.message==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});let{session:r,redirectType:n}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",n),await this._saveSession(r),setTimeout(async()=>{n==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return $(e)?{error:e}:{error:new Ye("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,s,r;try{let n;if(await this._removeSession(),"email"in e){let{email:h,password:u,options:d}=e,m=null,_=null;if(this.flowType==="pkce"){let S=ce();await te(this.storage,`${this.storageKey}-code-verifier`,S),m=await he(S),_=S===m?"plain":"s256"}n=await C(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d?.emailRedirectTo,body:{email:h,password:u,data:(t=d?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:m,code_challenge_method:_},xform:re})}else if("phone"in e){let{phone:h,password:u,options:d}=e;n=await C(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(s=d?.data)!==null&&s!==void 0?s:{},channel:(r=d?.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:re})}else throw new we("You must provide either an email or phone number and a password");let{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};let l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){let{email:n,password:a,options:o}=e;t=await C(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:et})}else if("phone"in e){let{phone:n,password:a,options:o}=e;t=await C(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:et})}else throw new we("You must provide either an email or phone number and a password");let{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ne}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if($(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,n;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let t=await ye(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/"),{data:n,error:a}=await C(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:re});return await Ie(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:r??null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new Ne}}async signInWithIdToken(e){await this._removeSession();try{let{options:t,provider:s,token:r,access_token:n,nonce:a}=e,{data:o,error:l}=await C(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:re});return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Ne}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l})}catch(t){if($(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,n,a;try{if(await this._removeSession(),"email"in e){let{email:o,options:l}=e,c=null,h=null;if(this.flowType==="pkce"){let d=ce();await te(this.storage,`${this.storageKey}-code-verifier`,d),c=await he(d),h=d===c?"plain":"s256"}let{error:u}=await C(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l?.data)!==null&&t!==void 0?t:{},create_user:(s=l?.shouldCreateUser)===null||s===void 0||s,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){let{phone:o,options:l}=e,{data:c,error:h}=await C(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(n=l?.shouldCreateUser)===null||n===void 0||n,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:h}}throw new we("You must provide either an email or phone number.")}catch(o){if($(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let r,n;e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession(),"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(s=e.options)===null||s===void 0?void 0:s.captchaToken);let{data:a,error:o}=await C(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:r,xform:re});if(o)throw o;if(!a)throw Error("An error occurred on token verification.");let l=a.session,c=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if($(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{await this._removeSession();let n=null,a=null;if(this.flowType==="pkce"){let o=ce();await te(this.storage,`${this.storageKey}-code-verifier`,o),n=await he(o),a=o===n?"plain":"s256"}return await C(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e?.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:zt})}catch(n){if($(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ue;let{error:r}=await C(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if($(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();let t=`${this.url}/resend`;if("email"in e){let{email:s,type:r,options:n}=e,{error:a}=await C(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:n?.captchaToken}},redirectTo:n?.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){let{phone:s,type:r,options:n}=e,{data:a,error:o}=await C(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:n?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:o}}throw new we("You must provide either an email or phone number and a type")}catch(t){if($(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){let r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let e=null,t=await ye(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let s=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s)return{data:{session:e},error:null};let{session:r,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await C(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Z}):await this._useSession(async t=>{var s,r;let{data:n,error:a}=t;if(a)throw a;return await C(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0,xform:Z})})}catch(t){if($(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{let{data:r,error:n}=s;if(n)throw n;if(!r.session)throw new ue;let a=r.session,o=null,l=null;if(this.flowType==="pkce"&&e.email!=null){let u=ce();await te(this.storage,`${this.storageKey}-code-verifier`,u),o=await he(u),l=u===o?"plain":"s256"}let{data:c,error:h}=await C(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Z});if(h)throw h;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return Xe(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ue;let t=Date.now()/1e3,s=t,r=!0,n=null,a=Xe(e.access_token);if(a.exp&&(r=(s=a.exp)<=t),r){let{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};n=o}else{let{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;n={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if($(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){let{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new ue;let{session:r,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if($(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!H())throw new be("No browser detected.");if(this.flowType!=="implicit"||this._isImplicitGrantFlow()){if(this.flowType=="pkce"&&!e)throw new Qe("Not a valid PKCE flow url.")}else throw new be("Not a valid implicit grant flow url.");let t=Ae(window.location.href);if(e){if(!t.code)throw new Qe("No code detected.");let{data:D,error:z}=await this._exchangeCodeForSession(t.code);if(z)throw z;let F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:D.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new be(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});let{provider_token:s,provider_refresh_token:r,access_token:n,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!n||!o||!a||!c)throw new be("No session defined in URL");let h=Math.round(Date.now()/1e3),u=parseInt(o),d=h+u;l&&(d=parseInt(l));let m=d-h;1e3*m<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${u}s`);let _=d-u;h-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,d,h):h-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",_,d,h);let{data:S,error:O}=await this._getUser(n);if(O)throw O;let P={provider_token:s,provider_refresh_token:r,access_token:n,expires_in:u,expires_at:d,refresh_token:a,token_type:c,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:t.type},error:null}}catch(t){if($(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){let e=Ae(window.location.href);return!!(H()&&(e.access_token||e.error_description))}async _isPKCEFlow(){let e=Ae(window.location.href),t=await ye(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;let{data:r,error:n}=t;if(n)return{error:n};let a=(s=r.session)===null||s===void 0?void 0:s.access_token;if(a){let{error:o}=await this.admin.signOut(a,e);if(o&&!($(o)&&o.name==="AuthApiError"&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Ie(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let n=16*Math.random()|0;return(r=="x"?n:3&n|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{let{data:{session:n},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;if(this.flowType==="pkce"){let n=ce();await te(this.storage,`${this.storageKey}-code-verifier`,`${n}/PASSWORD_RECOVERY`),s=await he(n),r=n===s?"plain":"s256"}try{return await C(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if($(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{let{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if($(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{let{data:s,error:r}=await this._useSession(async n=>{var a,o,l,c,h;let{data:u,error:d}=n;if(d)throw d;let m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await C(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(c=u.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return!H()||((t=e.options)===null||t===void 0?void 0:t.skipBrowserRedirect)||window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if($(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;let{data:n,error:a}=t;if(a)throw a;return await C(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if($(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var s,r;let n=Date.now();return await(s=async a=>(await It(200*a),this._debug(t,"refreshing attempt",a),await C(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:re})),r=(a,o,l)=>l&&l.error&&De(l.error)&&Date.now()+(a+1)*200-n<3e4,new Promise((a,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{let c=await s(l);if(!r(l,null,c)){a(c);return}}catch(c){if(!r(l,c)){o(c);return}}})()}))}catch(n){if(this._debug(t,"error",n),$(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),H()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let s=await ye(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}let r=Math.round(Date.now()/1e3),n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+10;if(this._debug(t,`session has${n?"":" not"} expired with margin of 10s`),n){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),De(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ue;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ve;let{data:n,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!n.session)throw new ue;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);let o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(this._debug(r,"error",n),$(n)){let a={session:null,error:n};return De(n)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){let r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});let n=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){n.push(l)}});if(await Promise.all(a),n.length>0){for(let o=0;o<n.length;o+=1)console.error(n[o]);throw n[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await te(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ie(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&H()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let r=Math.floor((1e3*s.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rt)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!H()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){let r=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){let n=ce();await te(this.storage,`${this.storageKey}-code-verifier`,n);let a=await he(n),o=n===a?"plain":"s256";this._debug("PKCE","code verifier",`${n.substring(0,5)}...`,"code challenge",a,"method",o);let l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(s?.queryParams){let n=new URLSearchParams(s.queryParams);r.push(n.toString())}return s?.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;let{data:r,error:n}=t;return n?{data:null,error:n}:await C(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if($(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;let{data:n,error:a}=t;if(a)return{data:null,error:a};let{data:o,error:l}=await C(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(!((r=o?.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if($(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;let{data:r,error:n}=t;if(n)return{data:null,error:n};let{data:a,error:o}=await C(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if($(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;let{data:r,error:n}=t;return n?{data:null,error:n}:await C(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=r?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if($(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){let{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){let{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};let s=e?.factors||[],r=s.filter(n=>n.factor_type==="totp"&&n.status==="verified");return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;let{data:{session:r},error:n}=e;if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(r.access_token),o=null;a.aal&&(o=a.aal);let l=o;return((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(c=>c.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2"),{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:a.amr||[]},error:null}}))}}me.nextInstanceID=0;class Zt extends me{constructor(e){super(e)}}let es={headers:Pt},ts={schema:"public"},ss={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rs={};class is{constructor(e,t,s){var r,n,a,o,l,c,h,u;if(this.supabaseUrl=e,this.supabaseKey=t,this.from=S=>this.rest.from(S),this.schema=S=>this.rest.schema(S),this.rpc=(S,O={},P)=>this.rest.rpc(S,O,P),!e)throw Error("supabaseUrl is required.");if(!t)throw Error("supabaseKey is required.");let d=e.replace(/\/$/,"");this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;let m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,_=function(S,O){let{db:P,auth:D,realtime:z,global:F}=S,{db:ps,auth:_s,realtime:ms,global:gs}=O;return{db:Object.assign(Object.assign({},ps),P),auth:Object.assign(Object.assign({},_s),D),realtime:Object.assign(Object.assign({},ms),z),global:Object.assign(Object.assign({},gs),F)}}(s??{},{db:ts,realtime:rs,auth:Object.assign(Object.assign({},ss),{storageKey:m}),global:es});this.storageKey=(n=(r=_.auth)===null||r===void 0?void 0:r.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=(a=_.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=_.auth)!==null&&l!==void 0?l:{},this.headers,(c=_.global)===null||c===void 0?void 0:c.fetch),this.fetch=Ct(t,this._getAccessToken.bind(this),(h=_.global)===null||h===void 0?void 0:h.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},_.realtime)),this.rest=new je(`${d}/rest/v1`,{headers:this.headers,schema:(u=_.db)===null||u===void 0?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new K(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ot(this.storageUrl,this.headers,this.fetch)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t,s,r,n,a;return s=this,r=void 0,n=void 0,a=function*(){let{data:o}=yield this.auth.getSession();return(t=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null},new(n||(n=Promise))(function(o,l){function c(d){try{u(a.next(d))}catch(m){l(m)}}function h(d){try{u(a.throw(d))}catch(m){l(m)}}function u(d){var m;d.done?o(d.value):((m=d.value)instanceof n?m:new n(function(_){_(m)})).then(c,h)}u((a=a.apply(s,r||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:n,flowType:a,debug:o},l,c){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zt({url:this.authUrl,headers:Object.assign(Object.assign({},h),l),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:a,debug:o,fetch:c})}_initRealtimeClient(e){return new yt(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}let ns=(i,e,t)=>new is(i,e,t);function L(i){return i!=null&&typeof i=="object"&&i["@@functional/placeholder"]===!0}function ie(i){return function e(t){return arguments.length==0||L(t)?e:i.apply(this,arguments)}}function ne(i){return function e(t,s){switch(arguments.length){case 0:return e;case 1:return L(t)?e:ie(function(r){return i(t,r)});default:return L(t)&&L(s)?e:L(t)?ie(function(r){return i(r,s)}):L(s)?ie(function(r){return i(t,r)}):i(t,s)}}}function nt(i){return function e(t,s,r){switch(arguments.length){case 0:return e;case 1:return L(t)?e:ne(function(n,a){return i(t,n,a)});case 2:return L(t)&&L(s)?e:L(t)?ne(function(n,a){return i(n,s,a)}):L(s)?ne(function(n,a){return i(t,n,a)}):ie(function(n){return i(t,s,n)});default:return L(t)&&L(s)&&L(r)?e:L(t)&&L(s)?ne(function(n,a){return i(n,a,r)}):L(t)&&L(r)?ne(function(n,a){return i(n,s,a)}):L(s)&&L(r)?ne(function(n,a){return i(t,n,a)}):L(t)?ie(function(n){return i(n,s,r)}):L(s)?ie(function(n){return i(t,n,r)}):L(r)?ie(function(n){return i(t,s,n)}):i(t,s,r)}}}function at(i){return Object.prototype.toString.call(i)==="[object Object]"}function ke(i,e){return Object.prototype.hasOwnProperty.call(e,i)}var as=nt(function(i,e,t){var s,r={};for(s in t=t||{},e=e||{})ke(s,e)&&(r[s]=ke(s,t)?i(s,e[s],t[s]):e[s]);for(s in t)ke(s,t)&&!ke(s,r)&&(r[s]=t[s]);return r}),os=nt(function i(e,t,s){return as(function(r,n,a){return at(n)&&at(a)?i(e,n,a):e(r,n,a)},t,s)}),ls=ne(function(i,e){return os(function(t,s,r){return r},i,e)});f(3206);var Fe={path:"/",sameSite:"lax",httpOnly:!1,maxAge:31536e6};async function cs(i,e){let t=await e(i);if(t)return t;let s=[];for(let r=0;;r++){let n=`${i}.${r}`,a=await e(n);if(!a)break;s.push(a)}if(s.length>0)return s.join("")}async function hs(i,e,t){if(await e(i)){await t(i);return}for(let s=0;;s++){let r=`${i}.${s}`;if(!await e(r))break;await t(r)}}let ot=()=>function(i,e,t){let s,r;if(!i||!e)throw Error(`Your project's URL and Key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let n={},a=!0;t&&({cookies:n,isSingleton:a=!0,cookieOptions:s,...r}=t);let o=ls({global:{headers:{"X-Client-Info":"supabase-ssr/0.1.0"}},auth:{flowType:"pkce",autoRefreshToken:!1,detectSessionInUrl:!1,persistSession:!0,storage:{isServer:!1,getItem:async l=>await cs(l,async c=>typeof n.get=="function"?await n.get(c):void 0),setItem:async(l,c)=>{let h=await function(u,d,m){let _=3180,S=encodeURIComponent(d);if(S.length<=_)return[{name:u,value:d}];let O=[];for(;S.length>0;){let P=S.slice(0,_),D=P.lastIndexOf("%");D>_-3&&(P=P.slice(0,D));let z="";for(;P.length>0;)try{z=decodeURIComponent(P);break}catch(F){if(F instanceof URIError&&P.at(-3)==="%"&&P.length>3)P=P.slice(0,P.length-3);else throw F}O.push(z),S=S.slice(P.length)}return O.map((P,D)=>({name:`${u}.${D}`,value:P}))}(l,c);await Promise.all(h.map(async u=>{typeof n.set=="function"&&await n.set(u.name,u.value,{...Fe,...s,maxAge:Fe.maxAge})}))},removeItem:async l=>{if(typeof n.remove=="function"&&typeof n.get!="function"){console.log("Removing chunked cookie without a `get` method is not supported.\n\n	When you call the `createBrowserClient` function from the `@supabase/ssr` package, make sure you declare both a `get` and `remove` method on the `cookies` object.\n\nhttps://supabase.com/docs/guides/auth/server-side/creating-a-client");return}await hs(l,async c=>typeof n.get=="function"?await n.get(c):void 0,async c=>{typeof n.remove=="function"&&await n.remove(c,{...Fe,...s,maxAge:0})})}}}},r);return ns(i,e,o)}("https://sxuuvagbvqjyrzduppdl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dXV2YWdidnFqeXJ6ZHVwcGRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDcwNjk5MjIsImV4cCI6MjAyMjY0NTkyMn0.H4FRLhGUjj_V5UNQgPsRT428q9IEpuN8h5Xpm5wAmK0");function us({id:i}){let e=ot(),t=async()=>{let{error:s}=await e.from("tasks").delete().eq("id",i);if(s)throw console.error("Error deleting task:",s.message),s;location.reload()};return(0,w.jsxs)("span",{className:"inline-flex overflow-hidden bg-white border rounded-md shadow-sm",children:[(0,w.jsx)(R.default,{className:"inline-block p-3 text-gray-700 border-e hover:bg-gray-50 focus:relative",title:"Edit Task",href:`/tasks/${i}`,children:(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),(0,w.jsx)("button",{className:"inline-block p-3 text-gray-700 hover:bg-gray-50 focus:relative",title:"Delete Task",type:"submit",onClick:t,children:(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})}function ds({id:i,title:e,description:t,completed:s,due_date:r}){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"px-4 py-2 font-medium text-gray-900 truncate whitespace-nowrap max-w-[14ch]",children:e}),(0,w.jsx)("td",{className:"px-4 py-2 text-gray-700 truncate whitespace-nowrap max-w-[32ch]",children:t}),(0,w.jsx)("td",{className:"px-4 py-2 text-center text-gray-700 whitespace-nowrap",children:s?"Completed":"Pending"}),(0,w.jsx)("td",{className:"px-4 py-2 text-center text-gray-700 whitespace-nowrap",children:new Date(r).toISOString().split("T")[0].replaceAll("-","/")}),(0,w.jsx)("td",{className:"px-4 py-2 text-center whitespace-nowrap",children:(0,w.jsx)(us,{id:i})})]})}function fs(){let[i,e]=(0,j.useState)(null);return(0,j.useEffect)(()=>{(async()=>{let t=ot(),{data:s}=await t.from("tasks").select();e(s)})()},[]),i===null?(0,w.jsx)("div",{children:"Loading..."}):i?.length===0?(0,w.jsx)("div",{className:"w-full overflow-x-auto rounded-lg",children:"No tasks yet. Create one first!"}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"w-full overflow-x-auto border border-gray-200 rounded-lg",children:(0,w.jsxs)("table",{className:"w-full text-sm bg-white divide-y-2 divide-gray-200 table-auto",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"px-4 py-2 font-medium text-gray-900 whitespace-nowrap text-start",children:"Title"}),(0,w.jsx)("th",{className:"px-4 py-2 font-medium text-gray-900 whitespace-nowrap text-start",children:"Description"}),(0,w.jsx)("th",{className:"px-4 py-2 font-medium text-center text-gray-900 whitespace-nowrap",children:"Status"}),(0,w.jsx)("th",{className:"px-4 py-2 font-medium text-center text-gray-900 whitespace-nowrap",children:"Due Date"}),(0,w.jsx)("th",{className:"px-4 py-2 font-medium text-center text-gray-900 whitespace-nowrap",children:"Actions"})]})}),(0,w.jsx)("tbody",{className:"divide-y divide-gray-200",children:i.sort((t,s)=>t.due_date>s.due_date?1:t.due_date<s.due_date?-1:0).map(t=>(0,j.createElement)(ds,{...t,key:t.id}))})]})})})}},2075:rn,6869:sn,901:tn,8855:en,5616:Zi,4351:Os,2898:Qi,1115:Yi,577:Xi,1622:js,6379:Wi,2542:Es,844:Hi,2568:Gi,7376:Ts,1681:Ki,8145:Ji,1707:Vi,60:xs,2251:zi,8239:Ss,9845:qi,490:Bi,200:Mi,5294:ks,3204:bs,5828:ws,7115:(M,N,f)=>{"use strict";f.r(N),f.d(N,{default:()=>I,runtime:()=>b});var p=f(1622),T=f(3204);let g=(0,f(2568).D)(String.raw`/mnt/c/Users/LENOVO/Desktop/Programming/work/cf-todo/src/app/ui/Table.tsx`),{__esModule:k,$$typeof:A}=g,E=g.default;var x=f(6379);let b="edge";function I(){return(0,p.jsxs)("div",{className:"w-full px-4 mx-auto sm:px-6 lg:px-16",children:[(0,p.jsx)("h3",{className:"mb-8 text-2xl font-bold text-gray-900 sm:text-3xl",children:"Task List"}),(0,p.jsx)(x.Suspense,{fallback:(0,p.jsx)(T.default,{}),children:(0,p.jsx)(E,{})})]})}},850:Fi,151:Di,3102:Ui,3405:Ni,5023:vs,9728:ys},M=>{var N=M(M.s=3032);(_ENTRIES=typeof _ENTRIES>"u"?{}:_ENTRIES)["middleware_app/page"]=N}]);var _n=function(){let M={exports:{},loaded:!1};return function(f,p){var T=Object.defineProperty,g=v=>T(v,"__esModule",{value:!0}),k=(v,w)=>{g(v);for(var j in w)T(v,j,{get:w[j],enumerable:!0})};k(p,{default:()=>x});function A(v){let w={};return v&&v.forEach((j,R)=>{w[R]=j,R.toLowerCase()==="set-cookie"&&(w[R]=E(j))}),w}function E(v){let w=[],j=0,R,q,U,V,W;function J(){for(;j<v.length&&/\s/.test(v.charAt(j));)j+=1;return j<v.length}function K(){return q=v.charAt(j),q!=="="&&q!==";"&&q!==","}for(;j<v.length;){for(R=j,W=!1;J();)if(q=v.charAt(j),q===","){for(U=j,j+=1,J(),V=j;j<v.length&&K();)j+=1;j<v.length&&v.charAt(j)==="="?(W=!0,j=V,w.push(v.substring(R,U)),R=j):j=U+1}else j+=1;(!W||j>=v.length)&&w.push(v.substring(R,v.length))}return w}function x(v){let w=v.staticRoutes.map(R=>({regexp:new RegExp(R.namedRegex),page:R.page})),j=v.dynamicRoutes?.map(R=>({regexp:new RegExp(R.namedRegex),page:R.page}))||[];return async function(R,q){let U=new URL(R.url).pathname,V={};if(v.nextConfig?.basePath&&U.startsWith(v.nextConfig.basePath)&&(U=U.replace(v.nextConfig.basePath,"")||"/"),v.nextConfig?.i18n)for(let J of v.nextConfig.i18n.locales){let K=new RegExp(`^/${J}($|/)`,"i");if(U.match(K)){U=U.replace(K,"/")||"/";break}}for(let J of w)if(J.regexp.exec(U)){V.name=J.page;break}if(!V.name){let J=I(U);for(let K of j||[]){if(J&&!I(K.page))continue;let X=K.regexp.exec(U);if(X){V={name:K.page,params:X.groups};break}}}let W=await _ENTRIES[`middleware_${v.name}`].default.call({},{request:{url:R.url,method:R.method,headers:A(R.headers),ip:b(R.headers,y.Ip),geo:{city:b(R.headers,y.City,!0),country:b(R.headers,y.Country,!0),latitude:b(R.headers,y.Latitude),longitude:b(R.headers,y.Longitude),region:b(R.headers,y.Region,!0)},nextConfig:v.nextConfig,page:V,body:R.body}});return q.waitUntil(W.waitUntil),W.response}}function b(v,w,j=!1){let R=v.get(w)||void 0;return j&&R?decodeURIComponent(R):R}function I(v){return v==="/api"||v.startsWith("/api/")}var y;(function(v){v.City="x-vercel-ip-city",v.Country="x-vercel-ip-country",v.Ip="x-real-ip",v.Latitude="x-vercel-ip-latitude",v.Longitude="x-vercel-ip-longitude",v.Region="x-vercel-ip-country-region"})(y||(y={}))}(M,M.exports),M.exports}.call({}).default({name:"app/page",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/tasks/create",regex:"^/tasks/create(?:/)?$",routeKeys:{},namedRegex:"^/tasks/create(?:/)?$"}],dynamicRoutes:[{page:"/tasks/[id]",regex:"^/tasks/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/tasks/(?<nxtPid>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}});export{_n as default};
/*!
* cookie
* Copyright(c) 2012-2014 Roman Shtylman
* Copyright(c) 2015 Douglas Christopher Wilson
* MIT Licensed
*/
